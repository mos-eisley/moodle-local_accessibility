{"version":3,"file":"rangewidget.min.js","sources":["../src/rangewidget.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * Default script for range-selector widgets\n *\n * @module      local/accessibility\n * @copyright   2023 Ponlawat Weerapanpisit <ponlawat_w@outlook.co.th>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\n/**\n * Callback type after range value being changed\n *\n * @callback valueChangedCallback\n * @param {number} newvalue new value\n * @returns {void}\n */\n\n/**\n * Initialise JS for a range-selector widget\n *\n * @param {string} name widget name\n * @param {valueChangedCallback} callback callback function when value changed\n * @param {string|number} userdefault default value of user\n * @returns {void}\n */\nexport const initrangewidget = (name, callback, userdefault = undefined) => {\n    const $inputrange = $(`#${name}-input`);\n    const $label = $(`#${name}-label`);\n    const $btnup = $(`#${name}-btnup`);\n    const $btndown = $(`#${name}-btndown`);\n    const $btnreset = $(`#${name}-btnreset`);\n\n    if (!$inputrange.length) {\n        return;\n    }\n\n    const min = parseFloat($inputrange.attr('min'));\n    const max = parseFloat($inputrange.attr('max'));\n    const step = parseFloat($inputrange.attr('step'));\n    const defaultvalue = parseFloat($inputrange.attr('data-default'));\n\n    $inputrange.on('input', () => {\n        if ($label.length) {\n            $label.html($inputrange.val());\n        }\n    });\n\n    $inputrange.on('change', () => {\n        if ($label.length) {\n            $label.html($inputrange.val());\n        }\n        if (callback) {\n            callback(parseFloat($inputrange.val()));\n        }\n    });\n\n    if ($btnup.length) {\n        $btnup.on('click', () => {\n            $inputrange.val(Math.min(max, parseFloat($inputrange.val()) + step));\n            $inputrange.trigger('change');\n        });\n    }\n\n    if ($btndown.length) {\n        $btndown.on('click', () => {\n            $inputrange.val(Math.max(min, parseFloat($inputrange.val()) - step));\n            $inputrange.trigger('change');\n        });\n    }\n\n    if ($btnreset.length) {\n        $btnreset.on('click', () => {\n            $inputrange.val(defaultvalue);\n            $inputrange.trigger('change');\n        });\n    }\n\n    if (userdefault) {\n        $inputrange.val(parseFloat(userdefault));\n        $inputrange.trigger('change');\n    }\n};\n"],"names":["e","_jquery","__esModule","default","_exports","initrangewidget","name","callback","userdefault","arguments","length","undefined","$inputrange","$","$label","$btnup","$btndown","$btnreset","min","parseFloat","attr","max","step","defaultvalue","on","html","val","Math","trigger"],"mappings":"0FAuBuB,IAAAA;;;;;;;6FAAvBC,SAAuBD,EAAvBC,UAAuBD,EAAAE,WAAAF,EAAAG,CAAAA,QAAAH,GA0ErBI,SAAAC,gBAxD6B,SAACC,KAAMC,UAAsC,IAA5BC,YAAWC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,QAAGE,EAC1D,MAAMC,aAAc,EAAAC,QAAAA,SAAE,IAAIP,cACpBQ,QAAS,EAAAD,QAAAA,SAAE,IAAIP,cACfS,QAAS,EAAAF,QAAAA,SAAE,IAAIP,cACfU,UAAW,EAAAH,QAAAA,SAAE,IAAIP,gBACjBW,WAAY,EAAAJ,QAAAA,SAAE,IAAIP,iBAExB,IAAKM,YAAYF,OACb,OAGJ,MAAMQ,IAAMC,WAAWP,YAAYQ,KAAK,QAClCC,IAAMF,WAAWP,YAAYQ,KAAK,QAClCE,KAAOH,WAAWP,YAAYQ,KAAK,SACnCG,aAAeJ,WAAWP,YAAYQ,KAAK,iBAEjDR,YAAYY,GAAG,SAAS,KAChBV,OAAOJ,QACPI,OAAOW,KAAKb,YAAYc,MAC5B,IAGJd,YAAYY,GAAG,UAAU,KACjBV,OAAOJ,QACPI,OAAOW,KAAKb,YAAYc,OAExBnB,UACAA,SAASY,WAAWP,YAAYc,OACpC,IAGAX,OAAOL,QACPK,OAAOS,GAAG,SAAS,KACfZ,YAAYc,IAAIC,KAAKT,IAAIG,IAAKF,WAAWP,YAAYc,OAASJ,OAC9DV,YAAYgB,QAAQ,SAAS,IAIjCZ,SAASN,QACTM,SAASQ,GAAG,SAAS,KACjBZ,YAAYc,IAAIC,KAAKN,IAAIH,IAAKC,WAAWP,YAAYc,OAASJ,OAC9DV,YAAYgB,QAAQ,SAAS,IAIjCX,UAAUP,QACVO,UAAUO,GAAG,SAAS,KAClBZ,YAAYc,IAAIH,cAChBX,YAAYgB,QAAQ,SAAS,IAIjCpB,cACAI,YAAYc,IAAIP,WAAWX,cAC3BI,YAAYgB,QAAQ,WAE1B"}